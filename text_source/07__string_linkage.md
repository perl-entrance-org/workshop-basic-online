# 文字列連結

---

## 文字列連結

### 文字列連結

```perl
my $word = 'word';
my $num = 123;

print "$word$num\n";         # word123

print $word . $num . "\n";   # word123

my $str = $word . $num;
print $str . "\n";          # word123
```

- `.` (ドット)で文字列や変数を連結することができます。

- 連結した文字列や変数を、別の変数に代入することも可能です。

---

## 文字列連結

### 数値演算と文字列連結は分ける

演算の優先順位と結合方向(演算の向き)は perldoc の [perlop](http://perldoc.jp/docs/perl/5.30.0/perlop.pod) の項に詳細が記載されています。

しかし、これを覚えるのも、他の人に読んでもらうのも大変な労力です。以下のように、わかりやすい記述を心がけましょう。

- `( )` で演算の順番を明確に示す

- 数値演算と文字列の連結は分けて書く

---

## 文字列連結

### 演算の順番（四則演算の補足）

```perl
my $num1 = 2 + 4 * 3;
print "$num1\n";    # 14

my $num2 = ( 2 + 4 ) * 3;
print "$num2\n";    # 18
```

- 演算の順序は、 `( )` を付けることで変更することができます。

- 通常の算数と同じく、Perl も「足し算･引き算」より「掛け算･割り算」の優先順位が高くなっています。

- 下段の例では `( )` を付けることで優先順位を変え、「足し算」を先に計算させています。

---

## 文字列連結

### 数値演算と文字列連結の混合

```perl
my $now                 = 2022;

my $start_perl_entrance = 2012;

print "Perl入学式は開講" . $now - $start_perl_entrance . "年です\n";
# Argument "PerlM-eM-^EM-%M-eM--M-&M-eM-<M-^OM-cM-^AM-/M-iM-^VM-^KM-h..." isn't numeric in subtraction (-) at / line 8.
# -2012年です
```

上のプログラムは、「-2012 年です」と、おかしな結果になります。

これは数値演算と文字列連結を混ぜた「アンチパターン（良くない例）」です。

---

## 文字列連結

### 数値演算と文字列連結の混合

1. まず 「`Perl入学式は開講`」（文字列） と 「`2022`」（数字） が文字連結されます。（結果：「今年は開講 2022」）

1. 次に、「`今年は開講2022`」（文字列） から 「`2012`」（数字）を引き算しようとし、おかしな結果になります。

---

## 文字列連結

### 数値演算と文字列連結は分ける

```perl
my $now                 = 2022;

my $start_perl_entrance = 2012;

print "Perl入学式は開講" . ($now - $start_perl_entrance ). "年です\n"; # Perl入学式は開講10年です
```

文字と数値計算は `( )` を用いて明確に分け、その後に連結するのが確実です。

---

## 文字列連結

### 数値演算と文字列連結は分ける

```perl
my $now                 = 2022;

my $start_perl_entrance = 2012;

my $period = $now - $start_perl_entrance;
print "Perl入学式は開講" . $period . "年です\n"; # Perl入学式は開講10年です
```

計算結果を別の変数に入れてから連結するのも良い手法です。

